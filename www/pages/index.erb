<section id="intro" class="row bg-graydark">
  <div class="contain row">
    <aside class="col 40">
      <a id="logo" href="/"><img src="images/roda-logo.svg" alt="Roda"></a>
      <small class='gray'><%= data(:site, :tagline) %></small>
      <nav>
      <%- %w(documentation development github).map do |page| -%>
        <%- item = data(:site, :pages, page) -%>
        <a href="<%= item['url'] %>"><%= item['text'] %></a>
      <%- end -%>
      </nav>
      <%- data(:home, :top_features).map do |name,info| -%>
        <h2 class='aqua'><%= titleize name %></h2><p><%= info %></p>
      <%- end -%>
    </aside>
    <div class="col 60">
      <pre>
        <code class="language-ruby">
# cat config.ru
require "roda"

class App < Roda
  route do |r|
    # GET / request
    r.root do
      r.redirect "/hello"
    end

    # /hello branch
    r.on "hello" do
      # Set variable for all routes in /hello branch
      @greeting = 'Hello'

      # GET /hello/world request
      r.get "world" do
        "#{@greeting} world!"
      end

      # /hello request
      r.is do
        # GET /hello request
        r.get do
          "#{@greeting}!"
        end

        # POST /hello request
        r.post do
          puts "Someone said #{@greeting}!"
          r.redirect
        end
      end
    end
  end
end

run App.freeze.app
        </code>
      </pre>
    </div>
  </div>
</section>

<section id="features" class="bg-white">
  <div class="contain">
    <h1 class="red center"><%= data(:home, :headline) %></h1>
    <ul class="plain row"><% data(:home,:features).map do |feature| %>
      <li>
        <svg class="feature" viewBox="0 0 41 41"><circle cx="20.5" cy="20.5" r="19.5"/><polyline points="10.88 22.78 15.31 27.21 28.93 13.59"/></svg>
        <strong><%= feature["name"] %></strong>
        <p class="graylight"><%= feature["info"] %></p>
      </li>
    <% end %></ul>
  </div>
</section>

<section id="videos" class="bg-cream">
  <div class="contain">
    <h2 class="aqua center"><%= data(:home, :videos_title) %></h2>   
    <%- data(:home, :videos).map do |video| -%>
      <div class="video row">
        <div class="col 40"><%= embed(video['url']) %></div>
        <div class="col 60">
          <h3><a href="<%= video['url'] %>" target="_blank"><%= video['title'] %></a></h3>
          <p><%= video['info'] %></p>
        </div>
      </div>
    <%- end -%>
  </div>
</section>

<section id="ecosystem" class="bg-green white center">
  <strong>
    <svg class="like" viewBox="0 0 39.87 37.41"><path d="M12.38,19.53s1.37.25,2.74-3.25,4-7,4-10.52-.2-4.6,1.8-5,4.79,2.75,4.79,5.88a31.57,31.57,0,0,1-1.5,7.7H35.63c3.75,0,4.77,4.11,1.49,5.59,3.28,1.77,2.19,5.43-.87,5.79,3,1.79,1.55,5.63-.83,5.59a2.7,2.7,0,0,1-1.67,5H19.44c-2.13,0-5.32-.29-6.82-2"/><rect x="0.75" y="17.41" width="11.88" height="19.25" rx="1" ry="1"/></svg>
    <%= data(:home, :performance_info) %>
  </strong>
</section>

<section id="performance" class="bg-aqua">
  <div class="contain">
    <%- %w(requests memory).map do |perf| -%><%- is_memory = perf == 'memory' -%>
    <h2 class='white center'><%= data(:home, "#{perf}_title") %></h2>
    <div class="benchmarks <%= perf %>">
      <%- data(:home, perf).map do |k,v| -%>
      <%- top = data(:home, perf, (is_memory ? :rails_api : :rack)) -%>
      <%- percent = ((v.to_f / top.to_f) * 100).to_i -%>
      <div class="score <%= k %>">
        <div class="name"><%= k.gsub('_',' ') %></div>
        <div class="bar bg-aquadark">
          <div class="fill bg-green" data-percent="<%= percent %>%"></div>
        </div>
        <div class="value"><%= v %> <small><%= is_memory ? "K" : "req/sec"  %></small></div>  
      </div>
      <%- end -%>
    <%- end -%>
  </div>
</section>

<section id="compare" class="bg-gray white">
  <div class="contain">
  <%- %w(sinatra).map do |framework| -%>
    <%- item = data(:site, :pages, "compare_to_#{framework}") -%>
    <div class="compare <%= framework %>">
      <h2>Compare to <%= titleize framework %></h2>
      <p><%= item['excerpt'] %></p>
      <a href="<%= item['url'] %>" class="btn continue">Continue Reading</a>
    </div>
  <%- end -%>
  </div>
</section>